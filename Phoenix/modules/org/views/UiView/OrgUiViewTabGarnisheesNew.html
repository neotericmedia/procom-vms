<div class="garnishee-new" data-ng-if="scopeOrg.actionScope.show.organizationIndependentContractorRoleGarnisheeNew">
	<div class="content-group form-horizontal" data-ng-form="formOrganizationGarnisheesNew" style="height:100%;">
		<div class="col-xs-12 garnishee-info">
			<div class="col-xs-12 garnishee-details">
                <div class="panel-heading garnishee-new-header">
                    <div class="row">
                        <h3 class="panel-title">Garnishee Details</h3>
                    </div>
                </div>
                <div class="panel-body garnishee-new-body">
                    <div class="row">
                        <div class="form-horizontal" role="form">
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" watch-property="scopeGarnisheeNew.GarnisheeHeader.OrganizationIdInternal" for-property="OrganizationIdInternal" for="OrganizationIdInternal" data-model-property="scopeGarnisheeNew.GarnisheeHeader.OrganizationIdInternal" data-original-title="" title="">Internal Company</label>
                                <div class="col-xs-5">
                                    <div class="input-group select2-bootstrap-append">
                                        <ui-select name="OrganizationIdInternal" data-ng-model="scopeGarnisheeNew.GarnisheeHeader.OrganizationIdInternal" theme="select2" class="form-control" data-ng-required="true">
                                            <ui-select-match placeholder="-- Select One --">{{$select.selected.DisplayName}}</ui-select-match>
                                            <ui-select-choices repeat="item.Id as item in scopeGarnisheeNew.internalOrgs | uiSelectChoicesFilter: $select.search: 'DisplayName': 'Id'">
                                                <span data-ng-bind-html="item.DisplayName | highlight: $select.search"></span>
                                                <span data-ng-bind-html="' - ' + item.Id | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="input-group-btn">
                                            <button tabindex="-1" data-ng-click="scopeGarnisheeNew.GarnisheeHeader.OrganizationIdInternal=undefined;" class="btn btn-default btn-garnishee-drp"><i class="material-icons md-18">clear</i></button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group garnishee-issue-date">
                                <label class="col-xs-4 control-label req-lab-right" for-property="IssueDate" for="IssueDate" data-model-property="scopeGarnisheeNew.GarnisheeHeader.IssueDate" data-original-title="" title="">Issue Date</label>
                                <div class="col-xs-5">
                                    <pt-date-picker name="IssueDate" data-ng-model="scopeGarnisheeNew.GarnisheeHeader.IssueDate" data-ng-required="true" />
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="CurrencyId" for="CurrencyId" data-model-property="scopeGarnisheeNew.GarnisheeHeader.CurrencyId" data-original-title="" title="">Currency</label>
                                <div class="col-xs-5">
                                    <div class="input-group select2-bootstrap-append">
                                        <ui-select name="CurrencyId" data-ng-model="scopeGarnisheeNew.GarnisheeHeader.CurrencyId" theme="select2" class="form-control" required>
                                            <ui-select-match placeholder="-- Select One --">{{$select.selected.text}}</ui-select-match>
                                            <ui-select-choices repeat="item.id as item in scopeGarnisheeNew.currencies | uiSelectChoicesFilter: $select.search: 'text'">
                                                <span data-ng-bind-html="item.text | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="input-group-btn">
                                            <button tabindex="-1" data-ng-click="scopeGarnisheeNew.GarnisheeHeader.CurrencyId = undefined" class="btn btn-default btn-garnishee-drp"><i class="material-icons md-18">clear</i></button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group garnishee-new-radio">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayTypeIsAmount" for="PayTypeIsAmount" data-model-property="scopeGarnisheeNew.GarnisheeHeader.PayTypeIsAmount" data-original-title="" title="">Payback Type</label>
                                <div class="col-xs-5">
                                    <pt-input-radio name="PayTypeIsAmount"
                                                    data-ng-click="scopeGarnisheeNew.paybackTypeChanged()"
                                                    data-ng-required="false"
                                                    data-template-type="input-radio"
                                                    data-ng-model="scopeGarnisheeNew.GarnisheeHeader.PayTypeIsAmount"
                                                    data-options="[{ key: true, value: 'Amount' },{ key: false, value: 'Percentage' }]" />
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group" data-ng-if="scopeGarnisheeNew.GarnisheeHeader.PayTypeIsAmount">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayAmount" for="PayAmount" data-model-property="scopeGarnisheeNew.GarnisheeHeader.PayAmount" data-original-title="" title="">Garnish Amount</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="PayAmount" ng-model="scopeGarnisheeNew.GarnisheeHeader.PayAmount" data-ng-required="true" data-float-between-input="{from:0, to:9999999.99, decimalplaces:2, doesemptytozero:'false'}">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group" data-ng-if="!scopeGarnisheeNew.GarnisheeHeader.PayTypeIsAmount">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayPercentage" for="PayPercentage" data-model-property="scopeGarnisheeNew.GarnisheeHeader.PayPercentage" data-original-title="" title="">Garnish Percentage</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="PayPercentage" ng-model="scopeGarnisheeNew.GarnisheeHeader.PayPercentage" data-ng-required="true" data-pt-field-view-custom="{ { scopeGarnisheeNew.GarnisheeHeader.PaybackPercentage | displayPercentageView:4 } }" data-float-between-input="{from:0.00, to:100.00, decimalplaces:4, doesemptytozero:'false' }">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group garnishee-new-radio">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayAmountIsMaximum" for="PayAmountIsMaximum" data-model-property="scopeGarnisheeNew.GarnisheeHeader.PayAmountIsMaximum" data-original-title="" title="">Garnish Maximum</label>
                                <div class="col-xs-5">
                                    <pt-input-radio name="PayAmountIsMaximum"
                                                    data-ng-click="scopeGarnisheeNew.payMaxChanged()"
                                                    data-ng-required="false"
                                                    data-template-type="input-radio"
                                                    data-ng-model="scopeGarnisheeNew.GarnisheeHeader.PayAmountIsMaximum"
                                                    data-options="[{ key: true, value: 'Set Amount' },{ key: false, value: 'Unlimited' }]" />
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group" data-ng-if="scopeGarnisheeNew.GarnisheeHeader.PayAmountIsMaximum">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayAmountMaximum" for="PayAmountMaximum" data-model-property="scopeGarnisheeNew.GarnisheeHeader.PayAmountMaximum" data-original-title="" title="">Maximum Amount</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="PayAmountMaximum" ng-model="scopeGarnisheeNew.GarnisheeHeader.PayAmountMaximum" data-ng-required="true" data-float-between-input="{from:0, to:9999999.99, decimalplaces:2, doesemptytozero:'false'}">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="Description" for="Description" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Description" data-original-title="" title="">Description</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="Description" ng-model="scopeGarnisheeNew.GarnisheeHeader.Description" data-ng-minlength="3" data-ng-maxlength="64" maxlength="64" data-ng-required="true">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="ReferenceNumber" for="ReferenceNumber" data-model-property="scopeGarnisheeNew.GarnisheeHeader.ReferenceNumber" data-original-title="" title="">Garnish Reference</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="ReferenceNumber" ng-model="scopeGarnisheeNew.GarnisheeHeader.ReferenceNumber" data-ng-minlength="3" data-ng-maxlength="64" maxlength="64" data-ng-required="true">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
			</div>
			<div class="col-xs-12 garnishee-details">
                <div class="panel-heading garnishee-new-header garnishee-payee-header">
                    <div class="row">
                        <div class="col-xs-9">
                            <h3 class="panel-title">Payee Details</h3>
                        </div>
                        <div class="col-xs-3">
                            <button class="btn btn-default" data-ng-if="!scopeGarnisheeNew.IsNew" data-ng-click="scopeGarnisheeNew.newPayee()">New</button>
                        </div>
                        <div class="col-xs-3">
                            <button class="btn btn-default" data-ng-if="scopeGarnisheeNew.IsNew" data-ng-click="scopeGarnisheeNew.newPayee()">Discard</button>
                        </div>
                    </div>
                </div>
                <div class="panel-body garnishee-new-body" data-ng-if="!scopeGarnisheeNew.IsNew">
                    <div class="row">
                        <div class="form-horizontal" role="form">
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayToId" for="PayToId" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayToId" data-original-title="" title="">Garnishee Type</label>
                                <div class="col-xs-5">
                                    <div class="input-group select2-bootstrap-append">
                                        <ui-select class="form-control" name="PayToId" data-ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayToId" theme="select2" data-ng-change="scopeGarnisheeNew.payToChanged({{$select.selected.PayToId}})" data-ng-required="true">
                                            <ui-select-match placeholder="-- Select One --">{{$select.selected.PayToDetails.PayToType}}</ui-select-match>
                                            <ui-select-choices repeat="item.PayToId as item in scopeGarnisheeNew.payToListItems | uiSelectChoicesFilter: $select.search: 'PayToDetails.PayToType'">
                                                <span data-ng-bind-html="item.PayToDetails.PayToType | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="input-group-btn">
                                            <button tabindex="-1" data-ng-click="scopeGarnisheeNew.GarnisheeHeader.Payee.PayToId = undefined;" class="btn btn-default btn-garnishee-drp"><i class="material-icons md-18">clear</i></button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="existing-garnishee-wrapper" data-ng-if="scopeGarnisheeNew.GarnisheeHeader.Payee.PayToId>0">
                                <div class="form-group">
                                    <label class="col-xs-4 control-label req-lab-right" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PayToName">Payee</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input" data-ng-required="true">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PayToName}}</div>
                                    </div>
                                    <div class="col-xs-3"></div>
                                </div>
                                <div class="form-group">
                                    <label class="col-xs-4 control-label req-lab-right" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine1">Address 1</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input" data-ng-required="true">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine1}}</div>
                                    </div>
                                </div>
                                <div class="form-group" data-ng-if="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine2 && scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine2.length>0">
                                    <label class="col-xs-4 control-label" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine2" data-original-title="" title="">Address 2</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input" data-ng-required="true">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine2}}</div>
                                    </div>
                                    <div class="col-xs-3"></div>
                                </div>
                                <div class="form-group">
                                    <label class="col-xs-4 control-label req-lab-right" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CityName">City</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input" data-ng-required="true">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CityName}}</div>
                                    </div>
                                    <div class="col-xs-3"></div>
                                </div>
                                <div class="form-group">
                                    <label class="col-xs-4 control-label req-lab-right" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId">Country</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input" data-ng-required="true">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId| lookup: scopeGarnisheeNew.countries}}</div>
                                    </div>
                                    <div class="col-xs-3"></div>
                                </div>
                                <div class="form-group">
                                    <label class="col-xs-4 control-label req-lab-right" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.SubdivisionId">Province/State</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.SubdivisionId | lookup: scopeGarnisheeNew.subdivisions}}</div>
                                    </div>
                                    <div class="col-xs-3"></div>
                                </div>
                                <div class="form-group">
                                    <label class="col-xs-4 control-label req-lab-right" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PostalCode">Postal/Zip</label>
                                    <div class="col-xs-5">
                                        <div class="garnishee-detail-input">{{scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PostalCode}}</div>
                                    </div>
                                    <div class="col-xs-3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-body garnishee-new-body" data-ng-if="scopeGarnisheeNew.IsNew">
                    <div class="row">
                        <div class="form-horizontal" role="form">
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayToType" for="PayToType" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayToType" data-original-title="" title="">Garnishee Type</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="PayToType" ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PayToType" data-ng-required="true" data-ng-minlength="3" data-ng-maxlength="128" maxlength="128">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="PayToName" for="PayToName" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PayToName" data-original-title="" title="">Payee</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="PayToName" ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PayToName" data-ng-required="true" data-ng-minlength="3" data-ng-maxlength="255" maxlength="255">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="AddressLine1" for="AddressLine1" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine1" data-original-title="" title="">Address 1</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="AddressLine1" ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine1" data-ng-required="true" data-ng-minlength="3" data-ng-maxlength="64" maxlength="64" data-length-message="LengthRange">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label" for-property="AddressLine2" for="AddressLine2" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine2" data-original-title="" title="">Address 2</label>
                                <div class="col-xs-5">
                                    <input type="text" class="form-control" name="AddressLine2" ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.AddressLine2" data-ng-minlength="3" data-ng-maxlength="64" maxlength="64" data-length-message="LengthRange">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="CityName" for="CityName" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CityName" data-original-title="" title="">City</label>
                                <div class="col-xs-5">
                                    <input class="form-control" type="text" name="CityName" ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CityName" data-ng-required="true" data-ng-minlength="3" data-ng-maxlength="64" maxlength="64" data-length-message="LengthRange">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" for-property="CountryId" for="CountryId" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId" data-original-title="" title="">Country</label>
                                <div class="col-xs-5">
                                    <div class="input-group select2-bootstrap-append">
                                        <ui-select class="form-control" name="CountryId" data-ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId" theme="select2" data-ng-change="scopeGarnisheeNew.countryChanged({{$select.selected}})" data-ng-required="true">
                                            <ui-select-match placeholder="-- Select One --">{{$select.selected.text}}</ui-select-match>
                                            <ui-select-choices repeat="item.id as item in scopeGarnisheeNew.countries | uiSelectChoicesFilter: $select.search: 'text'">
                                                <span data-ng-bind-html="item.text | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="input-group-btn">
                                            <button tabindex="-1" data-ng-click="scopeGarnisheeNew.restoreCountries()" class="btn btn-default btn-garnishee-drp"><i class="material-icons md-18">clear</i></button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" watch-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId" for-property="SubdivisionId" for="SubdivisionId" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.SubdivisionId" data-original-title="" title="">Province/State</label>
                                <div class="col-xs-5">
                                    <div class="input-group select2-bootstrap-append">
                                        <ui-select name="SubdivisionId" data-ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.SubdivisionId" theme="select2" class="form-control" data-ng-change="scopeGarnisheeNew.subdivisionChanged({{$select.selected}})" data-ng-required="true">
                                            <ui-select-match placeholder="-- Select One --">{{$select.selected.text}}</ui-select-match>
                                            <ui-select-choices repeat="item.id as item in scopeGarnisheeNew.subdivisions | uiSelectChoicesFilter: $select.search: 'text'">
                                                <span data-ng-bind-html="item.text | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                        <span class="input-group-btn">
                                            <button tabindex="-1" data-ng-click="scopeGarnisheeNew.restoreSubdivisions()" class="btn btn-default btn-garnishee-drp"><i class="material-icons md-18">clear</i></button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 control-label req-lab-right" watch-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId" for-property="PostalCode" for="PostalCode" data-model-property="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PostalCode" data-original-title="" title="">Postal/Zip</label>
                                <div class="col-xs-5">
                                    <input type="text" postal-zip-code-valid="{countryId: scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId, isRequired: true}" data-ng-required="true" postal-zip-code-mask="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.CountryId" ng-model="scopeGarnisheeNew.GarnisheeHeader.Payee.PayeeDetails.PostalCode" name="PostalCode" class="form-control ng-pristine ng-invalid" maxlength="12">
                                </div>
                                <div class="col-xs-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
			</div>
			<div class="row">
                <div class="col-xs-12">
                    <div class="panel-body" data-pt-validation-messages="scopeGarnisheeNew.ValidationMessages"></div>
                </div>
			</div>
			<div class="col-xs-12 panel-footer garnishee-footer-div">
				<div class="row">
					<div class="col-xs-6"></div>
					<div class="col-xs-6">
						<div class="pull-right">
							<button type="button" class="btn btn-primary"
									data-ng-click="scopeGarnisheeNew.garnisheeNew(scopeGarnishee,scopeOrg.actionScope.event.refreshActiveAdvancesAndActiveGarnisheesCount)"
									data-ng-disabled="!formOrganizationGarnisheesNew.$valid || scopeGarnisheeNew.submitIsRunning">
								Submit
							</button>
							<button type="button" class="btn btn-default" data-ng-click="scopeGarnisheeNew.close()">Cancel</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>